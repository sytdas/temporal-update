```
                                                                                  
                                                                                  
                                                                                  
                                                                                  
                                                                                  
                                                                                  
                                   ┌───────────┐                                  
         ┌─────────┐               │main workflow                                 
         ┼ scheduler               └─────┬─────┘                                  
         └────┬────┘                     │                                        
              │                          │                                        
              │                          │                                        
              │        update            │                                        
              ├────────────────────────► │                                        
              │                          │     activity                           
              │                          ┼───────────────────►                    
              │                          │                                        
              │                          ┼───┐                                    
              │                          │   │ change state                       
              │                          │◄──┘                                    
              │                          │                                        
              │                          │                                        
              │       update             │                                        
              │                          │                                        
              ┼─────────────────────────►│                                        
              │                          │                                        
              │                          │    activity                            
              │                          ┼───────────────────►                    
              │                          │                                        
              │                          ├───┐                                    
              │                          │   │                                    
              │                          │   │change state                        
              │                          │◄──┘                                    
              ▼                          │                                        
                                         │                                        
                                         │                                        
                                         │                                        
                                         │                                        
                                         │                                        
                                         ▼                                        
                                                                                  
                                                                                  
                                                                                  
                                                                                  
                                                                                  
                                                                                  
                                                                                  
                                                                                  
                                                                                  
```
